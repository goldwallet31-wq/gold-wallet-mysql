# ๐ ููุฎุต ุงูุชุฑุญูู ูู localStorage ุฅูู MySQL

## ูุธุฑุฉ ุนุงูุฉ

ุชู ุจูุฌุงุญ ุชุฑุญูู ุชุทุจูู ูุญูุธุฉ ุงูุฐูุจ ูู ุงุณุชุฎุฏุงู localStorage ุฅูู ูุงุนุฏุฉ ุจูุงูุงุช MySQL ูุน ูุธุงู ูุตุงุฏูุฉ ุขูู ุจุงุณุชุฎุฏุงู JWT.

## ุงูุชุบููุฑุงุช ุงูุฑุฆูุณูุฉ

### 1. ุงูุจููุฉ ุงูุฌุฏูุฏุฉ

#### ูุจู (localStorage):
```
ุงููุณุชุฎุฏู โ ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู โ ุญูุธ ูู localStorage โ ุนุฑุถ ุงูุจูุงูุงุช
```

#### ุจุนุฏ (MySQL + API):
```
ุงููุณุชุฎุฏู โ ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู โ API โ ูุงุนุฏุฉ ุงูุจูุงูุงุช โ ุนุฑุถ ุงูุจูุงูุงุช
```

### 2. ุงููููุงุช ุงูุฌุฏูุฏุฉ

#### ูุงุนุฏุฉ ุงูุจูุงูุงุช:
- `database/schema.sql` - ุชุนุฑูู ุงูุฌุฏุงูู ูุงูุนูุงูุงุช
- `.env.local` - ูุชุบูุฑุงุช ุงูุจูุฆุฉ

#### ุงูููุชุจุงุช:
- `lib/db.ts` - ุงุชุตุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช

#### API Endpoints:
- `app/api/auth/login/route.ts` - ุชุณุฌูู ุงูุฏุฎูู
- `app/api/auth/register/route.ts` - ุงูุชุณุฌูู
- `app/api/auth/verify/route.ts` - ุงูุชุญูู ูู ุงูุฌูุณุฉ
- `app/api/purchases/route.ts` - ุฌูุจ ูุฅุถุงูุฉ ุงููุดุชุฑูุงุช
- `app/api/purchases/[id]/route.ts` - ุชุญุฏูุซ ูุญุฐู ุงููุดุชุฑูุงุช

#### ุงูุชูุซูู:
- `DATABASE_SETUP.md` - ุฏููู ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช
- `API_DOCUMENTATION.md` - ุชูุซูู API ุงููุงูู
- `DATABASE_MIGRATION_SUMMARY.md` - ูุฐุง ุงูููู

### 3. ุงููููุงุช ุงููุนุฏูุฉ

#### Hooks:
- `hooks/use-auth.ts` - ุชุญุฏูุซ ููุชูุงุตู ูุน API ุจุฏูุงู ูู localStorage

#### ุงูุตูุญุงุช:
- `app/login/page.tsx` - ุชุญุฏูุซ ูุฅุฑุณุงู ุงูุทูุจุงุช ุฅูู API
- `app/page.tsx` - ุชุญุฏูุซ ูุฌูุจ ุงูุจูุงูุงุช ูู API
- `app/add-purchase/page.tsx` - ุชุญุฏูุซ ูุฅุถุงูุฉ ุงููุดุชุฑูุงุช ุนุจุฑ API
- `app/analysis/page.tsx` - ุชุญุฏูุซ ูุฌูุจ ุงูุจูุงูุงุช ูู API

#### ุงูุฅุนุฏุงุฏุงุช:
- `package.json` - ุฅุถุงูุฉ ุงูููุชุจุงุช ุงูุฌุฏูุฏุฉ

## ุงูููุชุจุงุช ุงููุถุงูุฉ

```json
{
  "dependencies": {
    "mysql2": "^3.x",
    "bcryptjs": "^2.x",
    "jsonwebtoken": "^9.x",
    "dotenv": "^16.x"
  },
  "devDependencies": {
    "@types/bcryptjs": "^2.x",
    "@types/jsonwebtoken": "^9.x"
  }
}
```

## ุฌุฏุงูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุฌุฏูู Users
```sql
CREATE TABLE users (
  id INT AUTO_INCREMENT PRIMARY KEY,
  email VARCHAR(255) UNIQUE NOT NULL,
  password VARCHAR(255) NOT NULL,
  full_name VARCHAR(255),
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);
```

### ุฌุฏูู Purchases
```sql
CREATE TABLE purchases (
  id INT AUTO_INCREMENT PRIMARY KEY,
  user_id INT NOT NULL,
  purchase_date DATE NOT NULL,
  weight DECIMAL(10, 3) NOT NULL,
  price_per_gram DECIMAL(10, 2) NOT NULL,
  total_price DECIMAL(12, 2) NOT NULL,
  manufacturing_fee DECIMAL(10, 2) DEFAULT 0,
  other_expenses DECIMAL(10, 2) DEFAULT 0,
  notes TEXT,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
);
```

## ุชุฏูู ุงููุตุงุฏูุฉ

### ุชุณุฌูู ุงูุฏุฎูู:
1. ุงููุณุชุฎุฏู ูุฏุฎู ุงูุจุฑูุฏ ููููุฉ ุงููุฑูุฑ
2. ูุชู ุฅุฑุณุงู ุงูุทูุจ ุฅูู `/api/auth/login`
3. ุงูุชุญูู ูู ุงูุจูุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
4. ุฅูุดุงุก JWT token
5. ุญูุธ ุงูุฑูุฒ ูู localStorage
6. ุฅุนุงุฏุฉ ุงูุชูุฌูู ุฅูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ

### ุงูุชุญูู ูู ุงูุฌูุณุฉ:
1. ุนูุฏ ุชุญููู ุงูุตูุญุฉุ ูุชู ุฌูุจ ุงูุฑูุฒ ูู localStorage
2. ุฅุฑุณุงู ุงูุฑูุฒ ุฅูู `/api/auth/verify`
3. ุงูุชุญูู ูู ุตุญุฉ ุงูุฑูุฒ
4. ุฅุฑุฌุงุน ุจูุงูุงุช ุงููุณุชุฎุฏู
5. ุนุฑุถ ุงูุตูุญุฉ ุฃู ุฅุนุงุฏุฉ ุงูุชูุฌูู ุฅูู ุชุณุฌูู ุงูุฏุฎูู

## ุชุฏูู ุงูุจูุงูุงุช

### ุฌูุจ ุงููุดุชุฑูุงุช:
```
ุตูุญุฉ โ useAuth (ุฌูุจ ุงูุฑูุฒ) โ API /purchases โ ูุงุนุฏุฉ ุงูุจูุงูุงุช โ ุนุฑุถ ุงูุจูุงูุงุช
```

### ุฅุถุงูุฉ ูุดุชุฑุงุฉ:
```
ูููุฐุฌ โ ุงูุชุญูู ูู ุงูุจูุงูุงุช โ API POST /purchases โ ูุงุนุฏุฉ ุงูุจูุงูุงุช โ ุฅุนุงุฏุฉ ุงูุชูุฌูู
```

### ุชุญุฏูุซ ูุดุชุฑุงุฉ:
```
ูููุฐุฌ โ ุงูุชุญูู ูู ุงูุจูุงูุงุช โ API PUT /purchases/id โ ูุงุนุฏุฉ ุงูุจูุงูุงุช โ ุชุญุฏูุซ ุงููุงุฌูุฉ
```

### ุญุฐู ูุดุชุฑุงุฉ:
```
ุชุฃููุฏ โ API DELETE /purchases/id โ ูุงุนุฏุฉ ุงูุจูุงูุงุช โ ุชุญุฏูุซ ุงููุงุฌูุฉ
```

## ุงูุฃูุงู

### ุชุญุณููุงุช ุงูุฃูุงู:
1. โ ุชุดููุฑ ูููุงุช ุงููุฑูุฑ ุจุงุณุชุฎุฏุงู bcryptjs
2. โ ุงุณุชุฎุฏุงู JWT ูููุตุงุฏูุฉ
3. โ ุงูุชุญูู ูู ุงูุฑูุฒ ูู ูู ุทูุจ
4. โ ุญูุงูุฉ ุงูุจูุงูุงุช ุงูุญุณุงุณุฉ ูู ูุชุบูุฑุงุช ุงูุจูุฆุฉ
5. โ ุงุณุชุฎุฏุงู HTTPS ูู ุงูุฅูุชุงุฌ (ูุทููุจ)

### ููุงุท ูุฌุจ ุงูุงูุชุจุงู ููุง:
- โ๏ธ ุบูุฑ JWT_SECRET ูู ุงูุฅูุชุงุฌ
- โ๏ธ ุงุณุชุฎุฏู ูููุงุช ูุฑูุฑ ูููุฉ
- โ๏ธ ูุนูู SSL ููุงุชุตุงู ุจู MySQL
- โ๏ธ ุงุณุชุฎุฏู HTTPS ูู ุงูุฅูุชุงุฌ

## ุฎุทูุงุช ุงูุชุฑุญูู

### 1. ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช
```bash
# ุชูููุฐ ููู schema.sql
mysql -u root -p < database/schema.sql
```

### 2. ุฅุนุฏุงุฏ ูุชุบูุฑุงุช ุงูุจูุฆุฉ
```bash
# ุฅูุดุงุก .env.local ุจุงูุจูุงูุงุช ุงูุตุญูุญุฉ
```

### 3. ุชุซุจูุช ุงูููุชุจุงุช
```bash
npm install mysql2 bcryptjs jsonwebtoken dotenv --legacy-peer-deps
```

### 4. ุชุดุบูู ุงูุชุทุจูู
```bash
npm run dev
```

### 5. ุงุฎุชุจุงุฑ ุงููุธุงุฆู
- ุงุฎุชุจุฑ ุชุณุฌูู ุงูุฏุฎูู
- ุงุฎุชุจุฑ ุฅุถุงูุฉ ูุดุชุฑุงุฉ
- ุงุฎุชุจุฑ ุชุญุฏูุซ ูุดุชุฑุงุฉ
- ุงุฎุชุจุฑ ุญุฐู ูุดุชุฑุงุฉ

## ุงูููุงุฆุฏ

โ **ุงูุฃูุงู**: ุจูุงูุงุช ุขููุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
โ **ุงูููุซูููุฉ**: ูุง ููุฏุงู ุงูุจูุงูุงุช ุนูุฏ ูุณุญ ุงููุชุตูุญ
โ **ุงููุงุจููุฉ ููุชูุณุน**: ูููู ุฅุถุงูุฉ ูุณุชุฎุฏููู ุฌุฏุฏ ุจุณูููุฉ
โ **ุงูุฃุฏุงุก**: ุงุณุชุนูุงูุงุช ูุญุณููุฉ
โ **ุงููุฑููุฉ**: ุณูููุฉ ุฅุถุงูุฉ ููุฒุงุช ุฌุฏูุฏุฉ

## ุงููุดุงูู ุงููุญุชููุฉ ูุงูุญููู

### ุงููุดููุฉ: "Connection refused"
**ุงูุญู**: ุชุฃูุฏ ูู ุฃู MySQL ูุนูู

### ุงููุดููุฉ: "Access denied"
**ุงูุญู**: ุชุญูู ูู ุจูุงูุงุช ุงูุงุชุตุงู ูู .env.local

### ุงููุดููุฉ: "Table doesn't exist"
**ุงูุญู**: ุชุฃูุฏ ูู ุชูููุฐ schema.sql

## ุงูุฎุทูุงุช ุงูุชุงููุฉ

- [ ] ุงุฎุชุจุงุฑ ุดุงูู ูููุธุงู
- [ ] ุฅุถุงูุฉ ุชุณุฌูู ุงูุฃุฎุทุงุก
- [ ] ุฅุถุงูุฉ ูุณุฎ ุงุญุชูุงุทูุฉ ุชููุงุฆูุฉ
- [ ] ุชุญุณูู ุงูุฃุฏุงุก
- [ ] ุฅุถุงูุฉ ููุฒุงุช ุฌุฏูุฏุฉ

---

**ุชู ุงูุชุฑุญูู ุจูุฌุงุญ! ๐**

